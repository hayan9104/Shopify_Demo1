{% liquid
    assign current_product = closest.product | default: product
    assign product_benefits_list = current_product.metafields.custom.product_benefits.value
  
    if product_benefits_list != blank and product_benefits_list.size > 0
      assign has_list_metafield = true
    else
      assign has_list_metafield = false
    endif
  %}
  
  
  <section class="pd-section" id="pd-section-{{ section.id }}">
      {%  if section.settings.heading!=blank %}
          <button class="pd-header" type="button" aria-expanded="false" id="pd-toggle-{{ section.id }}">
              <h2 class="pd-heading">{{ section.settings.heading }}</h2>
              <svg class="pd-chevron" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
          </button>
      {% endif %}
  
      <div class="pd-content pd-content-hidden" id="pd-content-{{ section.id }}">
          <div class="pd-grid">
            {% if has_list_metafield %}
                {% for benefit in product_benefits_list %}
                  <div class="pd-item">
                    {% liquid
                      assign benefit_text = blank
              
                      if benefit.text != blank
                        assign benefit_text = benefit.text
                      elsif benefit['text'] != blank
                        assign benefit_text = benefit['text']
                      endif
                    %}
              
                    {% if benefit_text != blank %}
                      <p class="pd-text" class="pd-bullet">{{ benefit_text }}</p>
                    {% endif %}
                  </div>
                {% endfor %}
              {% endif %}
              
          </div>
      </div>
  </section>
  
  <style>
      .pd-section {
      background: #ffffff;
      border-radius: 16px;
      padding: 40px 48px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      }
  
      .pd-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      background: none;
      border: none;
      padding: 0;
      cursor: pointer;
      text-align: left;
      position: relative;
      z-index: 1;
      }
  
      .pd-header:hover {
      opacity: 0.8;
      }
  
      .pd-heading {
      font-size: 26px;
      font-weight: 600;
      margin: 0;
      color: #222;
      }
  
      .pd-chevron {
      flex-shrink: 0;
      transition: transform 0.3s ease;
      color: #222;
      }
  
      .pd-header[aria-expanded="true"] .pd-chevron {
      transform: rotate(180deg);
      }
  
      .pd-content {
      margin-top: 32px;
      overflow: hidden;
      transition: max-height 0.3s ease, opacity 0.3s ease;
      }
  
      .pd-content.pd-content-hidden {
      display: none !important;
      }
  
      .pd-content.pd-content-visible {
      display: block !important;
      }
  
    
      .pd-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      column-gap: 48px;
      row-gap: 24px;
      }
  
      .pd-item {
      display: flex;
      align-items: flex-start;
      gap: 14px;
      }
   
      .pd-text {
      font-size: 18px;
      line-height: 1.4;
      margin: 0;
      color: #222;
      word-break: break-word;
      overflow-wrap: anywhere;
      white-space: normal;
      }
      .pd-bullet {
        position: relative;
        padding-left: 18px;
      }
      
      .pd-bullet::before {
        content: "â€¢";
        position: absolute;
        left: 0;
        top: 0;
        font-size: 20px;
        line-height: 1;
      }
      
  
  /* Mobile Styles */
  
      @media (max-width: 768px) {
      .pd-section {
          padding: 24px;
      }
  
      .pd-heading {
          font-size: 20px;
      }
  
      .pd-content {
          margin-top: 20px;
      }
  
      .pd-grid {
          grid-template-columns: 1fr;
          row-gap: 16px;
      }
  
      .pd-item {
          gap: 10px;
      }
  
  
      .pd-text {
          font-size: 15px;
      }
      }
  
  
  </style>
  
  <script>
  (function() {
      function toggleProductDetails(e) {
          const header = e.target.closest('.pd-header');
          if (!header) return;
          
          e.preventDefault();
          e.stopPropagation();
          
          const section = header.closest('.pd-section');
          if (!section) return;
          
          const content = section.querySelector('.pd-content');
          if (!content) return;
          
          const isExpanded = header.getAttribute('aria-expanded') === 'true';
          
          if (isExpanded) {
              content.classList.remove('pd-content-visible');
              content.classList.add('pd-content-hidden');
              header.setAttribute('aria-expanded', 'false');
          } else {
              content.classList.remove('pd-content-hidden');
              content.classList.add('pd-content-visible');
              header.setAttribute('aria-expanded', 'true');
          }
      }
      
      function hideAllContent() {
          const allContent = document.querySelectorAll('.pd-content');
          allContent.forEach(function(content) {
              if (!content.classList.contains('pd-content-visible')) {
                  content.classList.add('pd-content-hidden');
                  content.style.display = 'none';
              }
          });
      }
      
      function initProductDetails() {
          hideAllContent();
          
          if (!document.pdDetailsInitialized) {
              document.addEventListener('click', toggleProductDetails);
              document.pdDetailsInitialized = true;
          }
      }
      
      hideAllContent();
      
      if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initProductDetails);
      } else {
          initProductDetails();
      }
      
      window.addEventListener('load', function() {
          hideAllContent();
      });
  })();
  </script>
  
  {% schema %}
  {
      "name": "Product Benefits",
      "tag": "section",
      "class": "section",
      "settings": [
          {
              "type": "text",
              "id": "heading",
              "label":"Heading"
          }
      ],
      "presets": [
          {
              "name": "ProductBenefits",
          }
      ]
  }
  
  {%  endschema %}