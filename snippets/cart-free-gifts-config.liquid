{%- comment -%}
  This snippet provides configuration for cart free gifts functionality.
  It finds products with tags "free-gift-5000" and "free-gift-8000" and outputs their variant IDs.
  
  NOTE: If products are POS-only and not accessible via storefront, you can manually set
  the variant IDs by editing this file and replacing the null values below with the actual variant IDs.
  
  To find variant IDs:
  1. Go to Shopify Admin > Products
  2. Click on the gift product
  3. The variant ID is in the URL or product settings
{%- endcomment -%}

{%- liquid
  # MANUAL CONFIGURATION: Variant IDs for POS-only gift products
  assign gift_5000_variant_id = '15449383501897'
  assign gift_8000_variant_id = '15449383567433'

  # Try to find product with tag "free-gift-5000" (only if not manually configured)
  if gift_5000_variant_id == null
    for product in collections.all.products
      if product.tags contains 'free-gift-5000'
        # Get first available variant
        if product.first_available_variant
          assign gift_5000_variant_id = product.first_available_variant.id
        elsif product.selected_or_first_available_variant
          assign gift_5000_variant_id = product.selected_or_first_available_variant.id
        elsif product.variants.first
          assign gift_5000_variant_id = product.variants.first.id
        endif
        break
      endif
    endfor
  endif

  # Try to find product with tag "free-gift-8000" (only if not manually configured)
  if gift_8000_variant_id == null
    for product in collections.all.products
      if product.tags contains 'free-gift-8000'
        # Get first available variant
        if product.first_available_variant
          assign gift_8000_variant_id = product.first_available_variant.id
        elsif product.selected_or_first_available_variant
          assign gift_8000_variant_id = product.selected_or_first_available_variant.id
        elsif product.variants.first
          assign gift_8000_variant_id = product.variants.first.id
        endif
        break
      endif
    endfor
  endif
-%}

{%- comment -%}
  Always render the component, even if variant IDs are not set.
  This allows the component to be present and ready if variant IDs are configured later.
{%- endcomment -%}
<cart-free-gifts-component
  {% if gift_5000_variant_id %}data-gift-5000-variant-id="{{ gift_5000_variant_id }}"{% endif %}
  {% if gift_8000_variant_id %}data-gift-8000-variant-id="{{ gift_8000_variant_id }}"{% endif %}
></cart-free-gifts-component>

