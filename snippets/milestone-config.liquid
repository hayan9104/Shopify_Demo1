{% comment %}
  Milestone Rewards Configuration
  
  This snippet sets up milestone configuration variables that can be used
  throughout the theme. It reads from theme settings and defines milestone data.
  
  Usage: {% render 'milestone-config' %}
  
  After rendering, you can access:
  - milestone_rewards_enabled (boolean)
  - milestone_show_progress (boolean)
  - milestone_show_banner (boolean)
  - milestone_free_tag (string)
  - milestone_1, milestone_2, etc. (individual milestone objects)
{% endcomment %}

{% comment %} Load settings from theme customizer {% endcomment %}
{% liquid
  assign milestone_rewards_enabled = settings.milestone_rewards_enabled | default: true
  assign milestone_show_progress = settings.milestone_show_progress_bar | default: true
  assign milestone_show_banner = settings.milestone_show_success_banner | default: true
  assign milestone_free_tag = settings.milestone_free_item_tag | default: 'milestone-reward'
%}

{% comment %}
  MILESTONE DEFINITIONS
  =====================
  
  Define your milestones here. Each milestone needs:
  - threshold: Minimum cart total (in cents/paisa) to unlock
  - product_handle: Shopify product handle (URL-friendly name)
  - variant_id: Optional variant ID (leave blank for default variant)
  - display_name: Name shown to customers
  - order: Display order (1, 2, 3, etc.)
  
  To add/modify milestones, update the assignments below.
{% endcomment %}

{% liquid
  
  assign milestone_1_threshold = 599900
  assign milestone_1_product_handle = 'steel-shaker'
  assign milestone_1_variant_id = ''
  assign milestone_1_display_name = 'Steel Shaker'
  assign milestone_1_order = 1
  
 
  assign milestone_2_threshold = 1499900
  assign milestone_2_product_handle = 'bcaa'
  assign milestone_2_variant_id = ''
  assign milestone_2_display_name = '+BCAA'
  assign milestone_2_order = 2
  
  
  assign milestone_3_threshold = 2499900
  assign milestone_3_product_handle = 'iso-rich-premium-isolate'
  assign milestone_3_variant_id = ''
  assign milestone_3_display_name = '+ISORich'
  assign milestone_3_order = 3
  
 
  assign milestone_4_threshold = 3000000
  assign milestone_4_product_handle = 'amazon-e-gift-card'
  assign milestone_4_variant_id = ''
  assign milestone_4_display_name = '+GC ₹1K'
  assign milestone_4_order = 4
  
  
  assign milestone_5_threshold = 100000000
  assign milestone_5_product_handle = 'amazon-e-gift-card'
  assign milestone_5_variant_id = ''
  assign milestone_5_display_name = '+GC ₹10K'
  assign milestone_5_order = 5
%}

{% comment %}
  Create a JSON-like structure for JavaScript access
  This will be output as a script tag with milestone data
{% endcomment %}
<script type="application/json" id="milestone-rewards-config">
{
  "enabled": {{ milestone_rewards_enabled | json }},
  "freeItemTag": {{ milestone_free_tag | json }},
  "milestones": [
    {
      "id": "milestone_1",
      "threshold": {{ milestone_1_threshold }},
      "productHandle": {{ milestone_1_product_handle | json }},
      "variantId": {{ milestone_1_variant_id | json }},
      "displayName": {{ milestone_1_display_name | json }},
      "order": {{ milestone_1_order }}
    },
    {
      "id": "milestone_2",
      "threshold": {{ milestone_2_threshold }},
      "productHandle": {{ milestone_2_product_handle | json }},
      "variantId": {{ milestone_2_variant_id | json }},
      "displayName": {{ milestone_2_display_name | json }},
      "order": {{ milestone_2_order }}
    },
    {
      "id": "milestone_3",
      "threshold": {{ milestone_3_threshold }},
      "productHandle": {{ milestone_3_product_handle | json }},
      "variantId": {{ milestone_3_variant_id | json }},
      "displayName": {{ milestone_3_display_name | json }},
      "order": {{ milestone_3_order }}
    },
    {
      "id": "milestone_4",
      "threshold": {{ milestone_4_threshold }},
      "productHandle": {{ milestone_4_product_handle | json }},
      "variantId": {{ milestone_4_variant_id | json }},
      "displayName": {{ milestone_4_display_name | json }},
      "order": {{ milestone_4_order }}
    },
    {
      "id": "milestone_5",
      "threshold": {{ milestone_5_threshold }},
      "productHandle": {{ milestone_5_product_handle | json }},
      "variantId": {{ milestone_5_variant_id | json }},
      "displayName": {{ milestone_5_display_name | json }},
      "order": {{ milestone_5_order }}
    }
  ]
}
</script>

